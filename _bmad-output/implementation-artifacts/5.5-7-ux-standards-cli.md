# Story 5.5-7: UX Standards for Epic 6 CLI

## Story

**ID:** 5.5-7
**Key:** 5.5-7-ux-standards-cli
**Title:** Create UX standards and guidelines for CLI package
**Epic:** Epic 5.5 - Foundation Cleanup
**Phase:** Foundation & Quality Gates

**Description:**

Document CLI output format standards, error message patterns, help text structure, and export format consistency to guide Epic 6 CLI implementation. This prevents the "missing UX designs" issue from repeating.

---

## Acceptance Criteria

- **AC-1:** CLI output format standards documented
  - Command output structure
  - Table formatting guidelines
  - JSON output format
  - Color and styling conventions
  - Progress indicator patterns

- **AC-2:** Error message patterns defined
  - Error format structure
  - User-friendly error messages
  - Error codes and categories
  - Help suggestions in errors
  - Examples for common errors

- **AC-3:** Help text structure established
  - --help output format
  - Command descriptions
  - Argument documentation
  - Example usage patterns
  - Consistent help structure

- **AC-4:** Export format consistency
  - Ensure CLI exports match UI exports
  - Same file formats supported
  - Consistent diagram quality
  - Same LOD level mapping
  - Format-specific requirements

- **AC-5:** CLI UX documentation created
  - Standards document in _bmad-output
  - Examples for each pattern
  - Do's and don'ts
  - Reference implementations

---

## Tasks/Subtasks

### Task 1: Document CLI output format standards
- [ ] Define table output format
- [ ] Define JSON output structure
- [ ] Define color/styling conventions
- [ ] Define progress indicator patterns
- [ ] Provide examples for each

### Task 2: Define error message patterns
- [ ] Create error format structure
- [ ] Write guidelines for user-friendly messages
- [ ] Define error codes and categories
- [ ] Add help suggestions pattern
- [ ] Provide common error examples

### Task 3: Establish help text structure
- [ ] Define --help output format
- [ ] Create command description template
- [ ] Document argument documentation style
- [ ] Provide usage example patterns
- [ ] Show complete help examples

### Task 4: Ensure export format consistency
- [ ] List UI-supported export formats
- [ ] Define format-specific requirements
- [ ] Document LOD level mapping
- [ ] Ensure quality consistency
- [ ] Add export examples

### Task 5: Create comprehensive CLI UX guide
- [ ] Write standards document
- [ ] Include examples for all patterns
- [ ] Add do's and don'ts
- [ ] Provide reference code snippets
- [ ] Save in _bmad-output/planning-artifacts

### Task 6: Review with team
- [ ] Present standards to team
- [ ] Gather feedback
- [ ] Refine based on feedback
- [ ] Get final approval

---

## Dev Notes

### Context from Retrospective

Prevents repeating the "no UX designs" issue:
- Epic 5 started without UX designs
- Visual decisions made on the fly
- Need standards before Epic 6 begins
- CLI has limited UI but still needs consistency

### CLI UX Considerations

While CLI doesn't have graphical UI:
- Output formatting affects usability
- Error messages guide users
- Help text is primary documentation
- Export consistency critical for user experience

### Implementation Guidance

**CLI Output Standards Example:**
```markdown
# CLI Output Standards

## Table Output

Use ASCII table formatting for list outputs:

```
┌─────────────────────┬──────────┬──────────┐
│ Workspace           │ Files    │ Status   │
├─────────────────────┼──────────┼──────────┤
│ default-workspace   │ 1,234    │ Active   │
│ multi-repo-example  │ 5,678    │ Active   │
└─────────────────────┴──────────┴──────────┘
```

## JSON Output

All --json flag outputs use this structure:

```json
{
  "success": true,
  "data": { ... },
  "meta": {
    "timestamp": "2026-01-02T12:00:00Z",
    "version": "1.0.0"
  }
}
```

## Progress Indicators

Use spinners for operations:
```
⠋ Parsing codebase... (234/1000 files)
✓ Parsing complete (1000 files in 45s)
```

## Color Conventions

- Success: Green
- Warnings: Yellow
- Errors: Red
- Info: Blue
- Dim: Gray (for secondary info)
```

**Error Message Pattern Example:**
```markdown
# Error Message Patterns

## Structure

```
ERROR: <Short description>

<Detailed explanation of what went wrong>

Suggestions:
  - <Suggestion 1>
  - <Suggestion 2>

Error Code: E<code>
```

## Example

```
ERROR: Failed to parse repository

The parser encountered invalid JavaScript syntax in file:
  src/components/broken.js:42:15

Suggestions:
  - Fix the syntax error in the file
  - Exclude the file using --exclude flag
  - Run with --skip-errors to continue parsing

Error Code: E1001
```

## User-Friendly Guidelines

- Start with what went wrong (user's perspective)
- Explain why it failed (technical detail)
- Suggest how to fix it (actionable steps)
- Include error code for lookup
```

**Help Text Structure Example:**
```markdown
# Help Text Structure

## Command Help Format

```
diagram-builder parse - Parse a codebase and store in database

USAGE:
  diagram-builder parse [OPTIONS] <path>

ARGUMENTS:
  <path>    Path to codebase directory or Git repository URL

OPTIONS:
  --workspace <id>     Workspace ID to associate with (default: default-workspace)
  --name <name>        Name for the parsed codebase
  --exclude <pattern>  Glob pattern to exclude files
  --format <format>    Output format: json, table (default: table)

EXAMPLES:
  Parse local directory:
    $ diagram-builder parse ./my-project --name "My Project"

  Parse remote repository:
    $ diagram-builder parse https://github.com/user/repo.git

  Parse with exclusions:
    $ diagram-builder parse ./project --exclude "**/*.test.js"

For more information, visit: https://docs.diagram-builder.io
```

## Consistent Structure

Every command help should have:
1. Brief description
2. Usage syntax
3. Arguments (if any)
4. Options/flags
5. Examples (2-3 common cases)
6. Documentation link
```

**Export Format Consistency:**
```markdown
# Export Format Consistency

## Supported Formats (must match UI)

- PlantUML (.puml)
- Mermaid (.mmd)
- Draw.io (.drawio)
- GLTF (.gltf)
- PNG (.png)
- SVG (.svg)

## LOD Level Mapping

| Level | Description              | CLI Flag    |
|-------|--------------------------|-------------|
| 1     | High-level architecture  | --lod=1     |
| 2     | Module/package level     | --lod=2     |
| 3     | Class/function level     | --lod=3     |
| 4     | Maximum detail           | --lod=4     |

## Quality Requirements

- PNG/SVG: Same resolution as UI exports (default 1920x1080)
- GLTF: Same 3D structure as UI visualization
- Diagrams: Same styling and color scheme as UI
- Metadata: Include export timestamp, LOD level, source info
```

### Critical Constraints

- **CLI exports must match UI** - Consistency critical for users
- **Error messages must be helpful** - Users need guidance
- **Help text must be clear** - Primary CLI documentation
- **Standards must be actionable** - Developers can implement them

### Dependencies

- None - Can run in parallel with other stories

### Owner and Estimate

- **Owner:** Sally
- **Estimated Effort:** 4 hours
- **Priority:** Medium

---

## Dev Agent Record

### Implementation Plan

Created comprehensive CLI UX standards document covering:
1. CLI output format standards (tables, JSON, progress, colors)
2. Error message patterns with examples
3. Help text structure and templates
4. Export format consistency requirements
5. Visual design guidelines
6. Testing checklists
7. Implementation guidance

### Debug Log

No issues. Document created successfully with all required sections.

### Completion Notes

Successfully created comprehensive CLI UX standards document (450+ lines) at `_bmad-output/planning-artifacts/cli-ux-standards.md`

**Content Highlights:**

**Output Format Standards:**
- ASCII table formatting with box-drawing characters
- JSON output structure (success/error patterns)
- Progress indicators (spinners, progress bars)
- Color conventions (green=success, red=error, yellow=warning, blue=info)
- Recommended libraries: cli-table3, chalk, ora

**Error Message Patterns:**
- Structured error format with code, description, suggestions
- Error code ranges by category (E1000-E6000)
- 3 detailed error examples (parsing, database, file not found)
- Do's and don'ts for error messages

**Help Text Structure:**
- Standard command help template
- Top-level help example
- Consistent formatting across commands
- Examples, environment variables, documentation links

**Export Format Consistency:**
- All 6 formats must match UI exports (PlantUML, Mermaid, Draw.io, GLTF, PNG, SVG)
- LOD level mapping (1-4) identical to UI
- Quality requirements for each format type
- Export consistency checklist

**Additional Sections:**
- Visual design hierarchy guidelines
- Consistent symbol usage (✓, ✗, ⚠, ℹ, →, •)
- Testing checklists (manual and automated)
- Reference implementations (npm, git, docker examples)
- Implementation checklist for Epic 6

All acceptance criteria met:
- ✅ AC-1: CLI output format standards documented
- ✅ AC-2: Error message patterns defined
- ✅ AC-3: Help text structure established
- ✅ AC-4: Export format consistency ensured
- ✅ AC-5: CLI UX documentation created

This document provides clear, actionable guidance for Epic 6 CLI implementation and prevents the "missing UX designs" issue from Epic 5.

---

## File List

### New Files
1. `/_bmad-output/planning-artifacts/cli-ux-standards.md` - Comprehensive CLI UX standards (450+ lines)

---

## Change Log

### 2026-01-02
- Created cli-ux-standards.md with complete UX guidelines for Epic 6
- Documented table, JSON, progress, and color output standards
- Defined error message structure with 6 code categories
- Established help text templates and examples
- Specified export format consistency requirements
- Added testing checklists and implementation guidance

---

## Status

**Current Status:** done
**Created:** 2026-01-02
**Last Updated:** 2026-01-02
**Completed:** 2026-01-02
